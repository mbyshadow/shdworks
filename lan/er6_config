
##
## dnscrypt + adguard home. 
## ------------------------

set system name-server 1.1.1.1

delete system host-name
   set system host-name "name here"
delete system domain-name
   set system domain-name "name here"

set system ipv6 disable

delete interfaces ethernet eth0 
   set interfaces ethernet eth0 address dhcp
   set interfaces ethernet eth0 dhcp-options default-route update
   set interfaces ethernet eth0 dhcp-options default-route-distance 210
   set interfaces ethernet eth0 dhcp-options name-server no-update
   set interfaces ethernet eth0 duplex auto set interfaces ethernet eth0 firewall in name WAN_IN
   set interfaces ethernet eth0 firewall local name WAN_LOCAL
   set interfaces ethernet eth0 speed auto

delete interfaces ethernet eth1
   set interfaces ethernet eth1 mtu 1500
   set interfaces ethernet eth1 address 0.0.0.0/0
   set interfaces ethernet eth1 description "name here"
   set interfaces ethernet eth1 speed auto
   set interfaces ethernet eth1 duplex auto
   set interfaces ethernet eth1 poe output off
   
delete interfaces ethernet eth2
   set interfaces ethernet eth2 mtu 1500
   set interfaces ethernet eth2 address 0.0.0.0/0
   set interfaces ethernet eth2 description "name here"
   set interfaces ethernet eth2 speed auto
   set interfaces ethernet eth2 duplex auto
   set interfaces ethernet eth2 poe output off
   
delete interfaces ethernet eth3
   set interfaces ethernet eth3 mtu 1500
   set interfaces ethernet eth3 address 0.0.0.0/0
   set interfaces ethernet eth3 description "name here"
   set interfaces ethernet eth3 speed auto
   set interfaces ethernet eth3 duplex auto
   set interfaces ethernet eth3 poe output off
   
   
   set service dhcp-server disabled false
   set service dhcp-server hostfile-update disable
   
   set service dhcp-server shared-network-name dhcp1 authoritative disable
   set service dhcp-server shared-network-name dhcp1 subnet 0.0.0.0/0 default-router 0.0.0.0
   set service dhcp-server shared-network-name dhcp1 subnet 0.0.0.0/0 dns-server 0.0.0.0
   set service dhcp-server shared-network-name dhcp1 subnet 0.0.0.0/0 lease 86400
   set service dhcp-server shared-network-name dhcp1 subnet 0.0.0.0/0 start 0.0.0.0 stop 0.0.0.0
   
   set service dhcp-server shared-network-name dhcp2 authoritative disable
   set service dhcp-server shared-network-name dhcp2 subnet 0.0.0.0/0 default-router 0.0.0.0
   set service dhcp-server shared-network-name dhcp2 subnet 0.0.0.0/0 dns-server 0.0.0.0
   set service dhcp-server shared-network-name dhcp2 subnet 0.0.0.0/0 lease 86400
   set service dhcp-server shared-network-name dhcp2 subnet 0.0.0.0/0 start 0.0.0.0 stop 0.0.0.0

   set service dhcp-server shared-network-name dhcp3 authoritative disable
   set service dhcp-server shared-network-name dhcp3 subnet 0.0.0.0/0 default-router 0.0.0.0
   set service dhcp-server shared-network-name dhcp3 subnet 0.0.0.0/0 dns-server 0.0.0.0
   set service dhcp-server shared-network-name dhcp3 subnet 0.0.0.0/0 lease 86400
   set service dhcp-server shared-network-name dhcp3 subnet 0.0.0.0/0 start 0.0.0.0 stop 0.0.0.0

   set service dhcp-server static-arp disable
   set service dhcp-server use-dnsmasq enable

   
   
   set interfaces ethernet eth2 vif 10 address 10.0.10.1/24
   set interfaces ethernet eth2 vif 20 address 10.0.20.1/24

   set service dhcp-server shared-network-name vlan10 subnet 10.0.10.0/24 start 10.0.10.11 stop 10.0.10.150
   set service dhcp-server shared-network-name vlan10 subnet 10.0.10.0/24 default-router 10.0.10.1
   set service dhcp-server shared-network-name vlan10 subnet 10.0.10.0/24 dns-server 10.0.10.1

   set service dhcp-server shared-network-name vlan20 subnet 10.0.20.0/24 start 10.0.20.11 stop 10.0.20.150
   set service dhcp-server shared-network-name vlan20 subnet 10.0.20.0/24 default-router 10.0.20.1
   set service dhcp-server shared-network-name vlan20 subnet 10.0.20.0/24 dns-server 10.0.20.1
   
##
##	!
##
   set service dns forwarding cache-size 0
   set service dns forwarding listen-on eth1
   set service dns forwarding listen-on eth0
   set service dns forwarding options proxy-dnssec
   set service dns forwarding options 'server=127.0.0.1# ;exit'
   set service dns forwarding options no-resolv
   
   set service dns forwarding listen-on eth2.10
   set service dns forwarding listen-on eth2.20


   set interfaces loopback lo
   set port-forward auto-firewall enable
   set port-forward hairpin-nat enable
   set port-forward wan-interface eth0
   set port-forward lan-interface eth1
   set port-forward lan-interface eth2
   
   
   set service nat rule 5010 description 'masquerade for WAN'
   set service nat rule 5010 outbound-interface eth0
   set service nat rule 5010 type masquerade

delete service ssh port 22
   set service ssh port ####
   set service ssh protocol-version v2
   
   set service unms disable
   set system analytics-handler send-analytics-report false
   set system crash-handler send-crash-report false

##

## Default down
##
set interfaces ethernet eth2 disable
set interfaces ethernet eth2 duplex auto
set interfaces ethernet eth2 poe output off
set interfaces ethernet eth3 speed auto
set interfaces ethernet eth3 disable
set interfaces ethernet eth3 duplex auto
set interfaces ethernet eth3 poe output off
set interfaces ethernet eth3 speed auto
set interfaces ethernet eth4 disable
set interfaces ethernet eth4 duplex auto
set interfaces ethernet eth4 poe output off
set interfaces ethernet eth4 speed auto
set interfaces ethernet eth5 disable
set interfaces ethernet eth5 duplex auto
set interfaces ethernet eth5 speed auto
